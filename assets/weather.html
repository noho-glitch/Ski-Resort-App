<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Weather Data</title>
</head>

<body>
    <!-- Retrieved data will be dumped here -->
    <div class="city"></div>
    <div class="wind"></div>
    <div class="clouds"></div>
    <div class="temp"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        // This is our API key
        var APIKey = "51deb09fc20d171f26bffd5637e7878c";

        // This will be the user input postal code
        var latCoord = "40";
        var lonCoord = "75";

        function displayWeather() {
            // Here we are building the URL we need to query the database
            var queryURL = "http://api.openweathermap.org/data/2.5/weather?lat=" + latCoord + "&lon=" + lonCoord + "&appid=" + APIKey;

            console.log("url: " + queryURL);

            // Here we run our AJAX call to the OpenWeatherMap API
            $.ajax({
                url: queryURL,
                method: "GET"
            })
                // We store all of the retrieved data inside of an object called "response"
                .then(function (response) {

                    // Log the resulting object
                    console.log(response);

                    $("#resort-cards").empty();

                    // Converting Kelvin to Farenheit
                    var tempK = response.main.temp;
                    var tempF = ((tempK - 273.15) * 1.8 + 32);
                    console.log("f temp: " + tempF);

                    // Converting meters/sec to miles/hour (wind)
                    var metSec = response.wind.speed;
                    var milesHr = response.wind.speed * 2.237;
                    console.log("mph: " + milesHr)


                    // Making a new card
                    var newcard = $("<div>");

                    // Add bootstrap class to card

                    // Insert weather data into card




                    // Transfer content to HTML
                    $(".city").html("<h1>" + response.name + " Weather Details</h1>");
                    $(".wind").text("Wind Speed: " + tempF.toFixed(2) + " MPH");
                    $(".clouds").text("Clouds: " + response.clouds.all + "%");
                    $(".temp").text("Temperature: " + tempF.toFixed(2) + " F");

                    // Log the data in the console as well
                    console.log("Wind Speed: " + response.wind.speed);
                    console.log("Humidity: " + response.main.humidity);
                    console.log("Temperature (F): " + response.main.temp);
                });


        }

        // When buttons with a class of 'resort' are clicked, call the displayWeather function
        $(document).on("click", ".resort", displayWeather);


        displayWeather();





    </script>
</body>

</html>